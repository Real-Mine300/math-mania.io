<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Math Challenge</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
        }

        /* Main layout */
        .container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 20px;
        }

        /* Game box on the left */
        .game-box {
            flex: 2;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-right: 20px;
        }

        .question {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .timer, .score, .upcoming-questions {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .streak {
            font-size: 1.2rem;
            color: #4CAF50;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .answer-box {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        input {
            font-size: 1rem;
            padding: 10px;
            width: 60%;
            border: 2px solid #ccc;
            border-radius: 5px;
        }

        button {
            padding: 10px 15px;
            font-size: 1rem;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        /* Log box on the right */
        .log-box {
            flex: 1;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            height: 80%;
            background-color: #fafafa; /* Added background for readability */
        }

        .log-box ul {
            padding: 0;
            list-style-type: none;
        }

        .log-box li {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            font-size: 1.1rem;
        }

        /* Background colors for log entries */
        .correct {
            background-color: #c8e6c9; /* Light green */
            color: #388e3c;
        }

        .incorrect {
            background-color: #ffccbc; /* Light red */
            color: #d32f2f;
        }

        .timeout {
            background-color: #ffeb3b; /* Yellow */
            color: #f57c00;
        }

        .skipped {
            background-color: #ff7043; /* Tomato */
            color: #d32f2f;
        }

        .game-over {
            background-color: #ff5722; /* Dark orange for Game Over */
            color: white;
            font-weight: bold;
        }

        /* Upcoming questions box */
        .upcoming-box {
            background-color: #f9f9f9;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
        }

        .upcoming-box div {
            flex: 1;
            margin-right: 10px;
        }

        /* Theme styles */
        .light-mode {
            background-color: #fff;
            color: #333;
        }

        .dark-mode {
            background-color: #333;
            color: #fff;
        }

        .dark-mode .game-box {
            background-color: #444; /* Darker grey for game box */
        }

        .nature {
            background-color: #a5d6a7;
            color: #2e7d32;
        }

        .ocean {
            background-color: #81d4fa;
            color: #0277bd;
        }

        .cosmos {
            background-color: #3e1e7c;
            color: #bb86fc;
        }

        .cosmos .game-box {
            background-color: #5a2d8c; /* Lighter purple for the main box */
        }

        .desert {
            background-color: #d7a86b;
            color: #e64a19;
        }

        .light-mode .log-box {
            background-color: #fff;
        }

        .dark-mode .log-box {
            background-color: #444;
            color: #fff;
        }

        .nature .log-box {
            background-color: #c8e6c9;
        }

        .ocean .log-box {
            background-color: #b3e5fc;
        }

        .cosmos .log-box {
            background-color: #6a1b9a;
        }

        .desert .log-box {
            background-color: #fbe9e7;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="game-box">
            <div class="question" id="question"></div>
            <div class="streak" id="streak">Streak: 0</div>
            <div class="timer" id="timer">Time: 10s</div>
            <div class="score" id="score">Score: 0</div>
            <div class="answer-box">
                <input type="text" id="answer" placeholder="Your answer">
                <button id="submit">Submit</button>
            </div>
            <select id="theme-selector" onchange="changeTheme(this.value)">
                <option value="light-mode">Light Mode</option>
                <option value="dark-mode">Dark Mode</option>
                <option value="nature">Nature</option>
                <option value="ocean">Ocean</option>
                <option value="cosmos">Cosmos</option>
                <option value="desert">Desert</option>
            </select>
        </div>

        <div class="log-box" id="log-box">
            <div class="upcoming-box" id="upcoming-box">
                <div id="upcoming"></div>
            </div>
            <h3>Log</h3>
            <ul id="log-list"></ul>
        </div>
    </div>

    <script>
        let score = 0;
        let streak = 0;
        let bestScore = 0;
        let bestStreak = 0;
        let timeRemaining = 10;
        let difficulty = 1;
        let currentQuestion = {};
        let log = [];
        let timerInterval;

        // Themes
        const themes = ['light-mode', 'dark-mode', 'nature', 'ocean', 'cosmos', 'desert'];

        function changeTheme(theme) {
            document.body.classList = theme;
            document.getElementById("log-box").classList = theme + ' log-box'; // Change log background based on theme
            updateUpcomingQuestions();  // Update the upcoming questions box to reflect theme
        }

        // Generate random question
        function generateQuestion() {
            const operators = ['+', '-', '*'];
            let num1 = Math.floor(Math.random() * (difficulty * 10)) + 1;
            let num2 = Math.floor(Math.random() * (difficulty * 10)) + 1;
            let operator = operators[Math.floor(Math.random() * operators.length)];

            if (operator === '*' || operator === '+') {
                currentQuestion = {
                    question: `${num1} ${operator} ${num2}`,
                    answer: eval(`${num1} ${operator} ${num2}`),
                    operator: operator,
                    difficulty: difficulty
                };
            } else if (operator === '-') {
                currentQuestion = {
                    question: `${num1} ${operator} ${num2}`,
                    answer: num1 - num2,
                    operator: operator,
                    difficulty: difficulty
                };
            }
            document.getElementById("question").innerHTML = currentQuestion.question;
            updateUpcomingQuestions();
        }

        // Update upcoming questions list
        function updateUpcomingQuestions() {
            const upcomingList = document.getElementById("upcoming");
            upcomingList.innerHTML = '';
            for (let i = 1; i <= 3; i++) {
                const upcomingQuestion = document.createElement("div");
                upcomingQuestion.innerHTML = `#${i}: ${currentQuestion.question}`;
                upcomingList.appendChild(upcomingQuestion);
            }
        }

        // Update timer every second
        function startTimer() {
            timerInterval = setInterval(function() {
                if (timeRemaining > 0) {
                    timeRemaining--;
                    document.getElementById("timer").innerHTML = `Time: ${timeRemaining}s`;
                } else {
                    clearInterval(timerInterval);
                    gameOver();
                }
            }, 1000);
        }

        // Check answer
        function checkAnswer() {
            let playerAnswer = parseInt(document.getElementById("answer").value);
            let correct = playerAnswer === currentQuestion.answer;

            if (correct) {
                score += 10;
                streak++;
                log.push(`<li class="correct">Correct! (+10 points) - Time: ${timeRemaining}s - Streak: ${streak}</li>`);
            } else {
                log.push(`<li class="incorrect">Incorrect. Time: ${timeRemaining}s</li>`);
                streak = 0;
            }

            if (streak > bestStreak) bestStreak = streak;
            if (score > bestScore) bestScore = score;

            updateLog();
            generateQuestion();
        }

        function gameOver() {
            log.push(`<li class="game-over">Game Over! Final Score: ${score}</li>`);
            updateLog();
            clearInterval(timerInterval);
            score = 0;
            streak = 0;
            timeRemaining = 10;
            document.getElementById("streak").innerHTML = `Streak: 0`;
            document.getElementById("score").innerHTML = `Score: 0`;
            generateQuestion();
        }

        // Update log display
        function updateLog() {
            document.getElementById("log-list").innerHTML = log.join('');
        }

        // Handle submit
        document.getElementById("submit").addEventListener("click", function() {
            checkAnswer();
            document.getElementById("answer").value = '';
        });

        // Handle Enter key
        document.getElementById("answer").addEventListener("keypress", function(event) {
            if (event.key === 'Enter') {
                checkAnswer();
                document.getElementById("answer").value = '';
            }
        });

        // Start the game
        generateQuestion();
        startTimer();
    </script>
</body>
</html>
